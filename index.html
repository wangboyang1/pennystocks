
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Reddit Penny Stock AI Analyzer&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link rel="preconnect" href="https://fonts.googleapis.com"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link rel="preconnect" href="https://fonts.gstatic.com" crossorigin&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-enter {</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(20px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: opacity 0.5s ease, transform 0.5s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-enter-active {</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 1;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(0);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes spin {</p>
<p class="p1"><span class="Apple-converted-space">            </span>to { transform: rotate(360deg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.spinner {</p>
<p class="p1"><span class="Apple-converted-space">            </span>animation: spin 1s linear infinite;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.shimmer {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: linear-gradient(90deg, #2d3748 25%, #4a5568 50%, #2d3748 75%);</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-size: 200% 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>animation: shimmer 1.5s infinite;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes shimmer {</p>
<p class="p1"><span class="Apple-converted-space">            </span>0% { background-position: 200% 0; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>100% { background-position: -200% 0; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="bg-gray-900 text-gray-200"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="container mx-auto p-4 md:p-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Header with Navigation --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="flex justify-between items-center mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="text-left"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h1 class="text-3xl md:text-5xl font-bold text-white mb-2"&gt;Reddit Penny Stock AI Analyzer&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-400"&gt;Your AI-powered insight into Reddit's trending penny stocks.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="nav-to-sandbox-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Sandbox</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Main Page Content --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;main id="main-page"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Disclaimer --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-yellow-900/50 border border-yellow-700 text-yellow-200 px-4 py-3 rounded-lg relative mb-6" role="alert"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;strong class="font-bold"&gt;Disclaimer:&lt;/strong&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span class="block sm:inline"&gt;This app uses live Reddit, Yahoo Finance, and AI data. This is not financial advice. Always do your own research.&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Summary Table --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="mb-8 bg-gray-800/50 rounded-lg border border-gray-700 shadow-lg overflow-hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-xl font-bold text-white p-4 border-b border-gray-700"&gt;Performance Summary&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="overflow-x-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;table class="min-w-full text-sm text-left text-gray-300"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;thead class="text-xs text-gray-400 uppercase bg-gray-800"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;Ticker&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;Current Price&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3 text-right"&gt;1 Day %&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3 text-right"&gt;5 Day %&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3 text-right"&gt;1 Month %&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3 text-right"&gt;1 Year %&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;tbody id="summary-table-body"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;!-- Summary rows will be injected here --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="flex justify-center mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="refresh-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center transition-all duration-300 transform hover:scale-105 shadow-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;svg id="refresh-icon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5M20 20v-5h-5M20 4h-5v5M4 20h5v-5"&gt;&lt;/path&gt;&lt;/svg&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span id="refresh-text"&gt;Refresh Live Trends&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Stock Trends Container --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="trends-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Stock cards will be injected here --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/main&gt;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Sandbox Page Content --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;main id="sandbox-page" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="nav-to-main-btn" class="mb-4 bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"&gt;&amp;larr; Back to Trends&lt;/button&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Sandbox Summary --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-gray-800 p-4 rounded-lg border border-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-gray-400 text-sm font-bold uppercase"&gt;Total Value&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p id="sandbox-total-value" class="text-2xl font-bold text-white"&gt;$0.00&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-gray-800 p-4 rounded-lg border border-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-gray-400 text-sm font-bold uppercase"&gt;Total Cost&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p id="sandbox-total-cost" class="text-2xl font-bold text-white"&gt;$0.00&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-gray-800 p-4 rounded-lg border border-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-gray-400 text-sm font-bold uppercase"&gt;Gain / Loss&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p id="sandbox-total-pl" class="text-2xl font-bold text-white"&gt;$0.00 (0.00%)&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Add Stock Form --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="mb-8 bg-gray-800/50 p-6 rounded-lg border border-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;h2 class="text-xl font-bold text-white mb-4"&gt;Add Stock to Sandbox&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;form id="add-stock-form" class="grid grid-cols-1 md:grid-cols-5 gap-4 items-end"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;div class="w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;label for="ticker" class="block text-sm font-medium text-gray-400"&gt;Ticker&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;input type="text" id="ticker" name="ticker" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-10 px-3 uppercase" placeholder="e.g., GPUS"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;div class="w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;label for="purchaseDate" class="block text-sm font-medium text-gray-400"&gt;Purchase Date&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;input type="date" id="purchaseDate" name="purchaseDate" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-10 px-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;div class="w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;label for="purchasePrice" class="block text-sm font-medium text-gray-400"&gt;Purchase Price&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;input type="number" step="0.0001" id="purchasePrice" name="purchasePrice" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-10 px-3" placeholder="e.g., 1.25"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div class="w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;label for="shares" class="block text-sm font-medium text-gray-400"&gt;Shares&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;input type="number" step="1" id="shares" name="shares" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-10 px-3" placeholder="e.g., 100"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold h-10 px-4 rounded-lg transition-colors"&gt;Add Stock&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;/form&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Sandbox Portfolio Table --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-gray-800/50 rounded-lg border border-gray-700 shadow-lg overflow-hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-xl font-bold text-white p-4 border-b border-gray-700"&gt;Sandbox Portfolio&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;div class="overflow-x-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;table class="min-w-full text-sm text-left text-gray-300"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;thead class="text-xs text-gray-400 uppercase bg-gray-800"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;Ticker&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;Shares&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;Purchase Price&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;Live Price&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;Total Cost&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;Current Value&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3 text-right"&gt;P/L %&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;th scope="col" class="px-6 py-3"&gt;&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;tbody id="sandbox-table-body"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;!-- Sandbox portfolio rows will be injected here --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/main&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Page Elements</p>
<p class="p1"><span class="Apple-converted-space">        </span>const mainPage = document.getElementById('main-page');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sandboxPage = document.getElementById('sandbox-page');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const navToSandboxBtn = document.getElementById('nav-to-sandbox-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const navToMainBtn = document.getElementById('nav-to-main-btn');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Main Page Elements</p>
<p class="p1"><span class="Apple-converted-space">        </span>const trendsContainer = document.getElementById('trends-container');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const summaryTableBody = document.getElementById('summary-table-body');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const refreshBtn = document.getElementById('refresh-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const refreshIcon = document.getElementById('refresh-icon');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const refreshText = document.getElementById('refresh-text');</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Sandbox Page Elements</p>
<p class="p1"><span class="Apple-converted-space">        </span>const addStockForm = document.getElementById('add-stock-form');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sandboxTableBody = document.getElementById('sandbox-table-body');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sandboxTotalValueEl = document.getElementById('sandbox-total-value');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sandboxTotalCostEl = document.getElementById('sandbox-total-cost');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sandboxTotalPlEl = document.getElementById('sandbox-total-pl');</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// API and Globals</p>
<p class="p1"><span class="Apple-converted-space">        </span>const API_KEY = ""; // In a real app, this would be handled securely on a server.</p>
<p class="p1"><span class="Apple-converted-space">        </span>const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const PROXY_URL = 'https://api.codetabs.com/v1/proxy/?quest=';</p>
<p class="p1"><span class="Apple-converted-space">        </span>const REDDIT_TOP_URL = `${PROXY_URL}${encodeURIComponent('https://www.reddit.com/r/pennystocks/search.json?q=&amp;restrict_sr=on&amp;sort=top&amp;t=month&amp;limit=100')}`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const REDDIT_HOT_URL = `${PROXY_URL}${encodeURIComponent('https://www.reddit.com/r/pennystocks/hot.json?limit=100')}`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let sandboxRefreshInterval = null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- NAVIGATION ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>navToSandboxBtn.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>mainPage.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxPage.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>renderSandbox();</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (sandboxRefreshInterval) clearInterval(sandboxRefreshInterval);</p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxRefreshInterval = setInterval(renderSandbox, 30000); // Refresh every 30s</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>navToMainBtn.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxPage.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>mainPage.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (sandboxRefreshInterval) clearInterval(sandboxRefreshInterval);</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- SANDBOX LOGIC ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>function getSandboxPortfolio() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>return JSON.parse(localStorage.getItem('pennySandboxPortfolio')) || [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function saveSandboxPortfolio(portfolio) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>localStorage.setItem('pennySandboxPortfolio', JSON.stringify(portfolio));</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>addStockForm.addEventListener('submit', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const formData = new FormData(addStockForm);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const portfolio = getSandboxPortfolio();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const newStock = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>id: Date.now(),</p>
<p class="p1"><span class="Apple-converted-space">                </span>ticker: formData.get('ticker').toUpperCase(),</p>
<p class="p1"><span class="Apple-converted-space">                </span>purchaseDate: formData.get('purchaseDate'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>purchasePrice: parseFloat(formData.get('purchasePrice')),</p>
<p class="p1"><span class="Apple-converted-space">                </span>shares: parseFloat(formData.get('shares'))</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>portfolio.push(newStock);</p>
<p class="p1"><span class="Apple-converted-space">            </span>saveSandboxPortfolio(portfolio);</p>
<p class="p1"><span class="Apple-converted-space">            </span>addStockForm.reset();</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('purchaseDate').valueAsDate = new Date();</p>
<p class="p1"><span class="Apple-converted-space">            </span>renderSandbox();</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>document.body.addEventListener('click', e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (e.target.matches('.add-to-sandbox-btn')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const ticker = e.target.dataset.ticker;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const price = e.target.dataset.price;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>navToSandboxBtn.click(); // Switch to sandbox page</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Pre-fill form</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('ticker').value = ticker;</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('purchasePrice').value = price;</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('shares').focus();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (e.target.matches('.remove-from-sandbox-btn')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const idToRemove = parseInt(e.target.dataset.id, 10);</p>
<p class="p1"><span class="Apple-converted-space">                </span>let portfolio = getSandboxPortfolio();</p>
<p class="p1"><span class="Apple-converted-space">                </span>portfolio = portfolio.filter(stock =&gt; stock.id !== idToRemove);</p>
<p class="p1"><span class="Apple-converted-space">                </span>saveSandboxPortfolio(portfolio);</p>
<p class="p1"><span class="Apple-converted-space">                </span>renderSandbox();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>async function renderSandbox() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const portfolio = getSandboxPortfolio();</p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxTableBody.innerHTML = '';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (portfolio.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>sandboxTableBody.innerHTML = `&lt;tr&gt;&lt;td colspan="8" class="text-center p-8 text-gray-500"&gt;Your sandbox is empty. Add a stock to begin.&lt;/td&gt;&lt;/tr&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>sandboxTotalValueEl.textContent = '$0.00';</p>
<p class="p1"><span class="Apple-converted-space">                </span>sandboxTotalCostEl.textContent = '$0.00';</p>
<p class="p1"><span class="Apple-converted-space">                </span>sandboxTotalPlEl.textContent = '$0.00 (0.00%)';</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>let totalValue = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let totalCost = 0;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const stockPromises = portfolio.map(async (stock) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const liveData = await getStockData(stock.ticker);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const livePrice = liveData ? parseFloat(liveData.price) : stock.purchasePrice; // Fallback to purchase price if API fails</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const purchaseCost = stock.purchasePrice * stock.shares;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const currentValue = livePrice * stock.shares;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const pl = currentValue - purchaseCost;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const plPercent = purchaseCost &gt; 0 ? (pl / purchaseCost) * 100 : 0;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>totalCost += purchaseCost;</p>
<p class="p1"><span class="Apple-converted-space">                </span>totalValue += currentValue;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const plColor = pl &gt;= 0 ? 'text-green-400' : 'text-red-400';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>return `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;tr class="bg-gray-800/50 border-b border-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;th scope="row" class="px-6 py-4 font-medium text-white whitespace-nowrap"&gt;${stock.ticker}&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="px-6 py-4"&gt;${stock.shares.toLocaleString()}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="px-6 py-4"&gt;$${stock.purchasePrice.toFixed(4)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="px-6 py-4"&gt;$${livePrice.toFixed(4)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="px-6 py-4"&gt;$${purchaseCost.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="px-6 py-4"&gt;$${currentValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="px-6 py-4 text-right ${plColor} font-bold"&gt;${plPercent.toFixed(2)}%&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="px-6 py-4 text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;button class="remove-from-sandbox-btn text-red-500 hover:text-red-400" data-id="${stock.id}"&gt;Remove&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const tableRows = await Promise.all(stockPromises);</p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxTableBody.innerHTML = tableRows.join('');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update summary</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalPl = totalValue - totalCost;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalPlPercent = totalCost &gt; 0 ? (totalPl / totalCost) * 100 : 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalPlColor = totalPl &gt;= 0 ? 'text-green-400' : 'text-red-400';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxTotalValueEl.textContent = `$${totalValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxTotalCostEl.textContent = `$${totalCost.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxTotalPlEl.textContent = `$${totalPl.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})} (${totalPlPercent.toFixed(2)}%)`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>sandboxTotalPlEl.className = `text-2xl font-bold ${totalPlColor}`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- MAIN PAGE LOGIC (UNCHANGED FROM PREVIOUS) ---</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Helper for exponential backoff</p>
<p class="p1"><span class="Apple-converted-space">        </span>const fetchWithBackoff = async (url, options, retries = 5, delay = 1000) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; retries; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const response = await fetch(url, options);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (response.ok) return response;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (response.status === 429) { // Too Many Requests</p>
<p class="p1"><span class="Apple-converted-space">                        </span>console.warn(`Rate limited. Retrying in ${delay / 1000}s...`);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>await new Promise(resolve =&gt; setTimeout(resolve, delay));</p>
<p class="p1"><span class="Apple-converted-space">                        </span>delay *= 2; // Exponential backoff</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>throw new Error(`HTTP error! status: ${response.status}`);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (i === retries - 1) throw error;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>await new Promise(resolve =&gt; setTimeout(resolve, delay));</p>
<p class="p1"><span class="Apple-converted-space">                    </span>delay *= 2;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Function to get live and historical stock data from Yahoo Finance</p>
<p class="p1"><span class="Apple-converted-space">        </span>async function getStockData(ticker) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const url = `${PROXY_URL}${encodeURIComponent(`https://query1.finance.yahoo.com/v8/finance/chart/${ticker}?range=1y&amp;interval=1d`)}`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const response = await fetch(url);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!response.ok) return null;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const data = await response.json();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const result = data?.chart?.result?.[0];</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!result || !result.meta || !result.indicators.quote?.[0]?.close) return null;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const meta = result.meta;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const prices = result.indicators.quote[0].close;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const currentPrice = meta.regularMarketPrice;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (currentPrice === undefined || prices.length === 0) return null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const calcChange = (oldPrice) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (oldPrice === null || oldPrice === 0) return 'N/A';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return (((currentPrice - oldPrice) / oldPrice) * 100).toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>return {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>price: currentPrice.toFixed(4),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isUp: currentPrice &gt;= (meta.previousClose || currentPrice),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>change1d: calcChange(prices[prices.length - 2]),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>change5d: calcChange(prices[prices.length - 6]),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>change1mo: calcChange(prices[prices.length - 22]),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>change1y: calcChange(prices[0]),</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error(`Failed to fetch data for ${ticker}:`, error);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return null;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Function to fetch and parse posts from a given Reddit URL</p>
<p class="p1"><span class="Apple-converted-space">        </span>async function fetchAndParsePosts(url) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const response = await fetch(url);</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!response.ok) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>throw new Error(`Failed to fetch Reddit data from ${url}`);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>const data = await response.json();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const posts = data.data.children;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const tickerRegex = /\$[A-Z]{2,5}\b/g;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const validPosts = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const post of posts) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const content = (post.data.title + ' ' + (post.data.selftext || ''));</p>
<p class="p1"><span class="Apple-converted-space">                </span>const potentialTickers = [...new Set(content.match(tickerRegex) || [])];</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (potentialTickers.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>validPosts.push({</p>
<p class="p1"><span class="Apple-converted-space">                        </span>allTickers: potentialTickers.map(t =&gt; t.substring(1)),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>upvotes: post.data.score,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>postTitle: post.data.title,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>postUrl: `https://www.reddit.com${post.data.permalink}`,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>postBody: post.data.selftext || '',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>return validPosts;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Function to get real analysis from Gemini AI</p>
<p class="p1"><span class="Apple-converted-space">        </span>async function getRealAiAnalysis(stock) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const systemPrompt = `You are a cautious financial analyst specializing in speculative penny stocks. Your analysis must be objective and highlight risks. For the given stock ticker, provide a structured JSON response with the following schema: {"companyName": "string", "intrinsicValue": "string", "profitPossibility": "string", "sellingPoint": "number", "stopLoss": "number"}.</p>
<p class="p1">- First, analyze the provided 'Reddit Post Content' for any explicitly mentioned 'price target', 'PT', 'target price', or 'selling point'.</p>
<p class="p1">- If a specific price is mentioned in the post, you MUST use that value for the 'sellingPoint' in your JSON response.</p>
<p class="p1">- If no target is mentioned in the post, then generate your own plausible target price that is higher than the current price.</p>
<p class="p1">- companyName: The full legal name of the company.</p>
<p class="p1">- intrinsicValue: A brief, one-sentence analysis of its potential intrinsic value based on fundamentals, or lack thereof.</p>
<p class="p1">- profitPossibility: A short-term profit outlook (e.g., 'Highly speculative, momentum-driven', 'High risk, catalyst dependent').</p>
<p class="p1">- stopLoss: A plausible stop-loss price to manage downside risk, as a number. This MUST be lower than the current price.`;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const truncatedBody = stock.postBody.substring(0, 2000);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const userQuery = `Analyze the penny stock with ticker: ${stock.ticker}.</p>
<p class="p1">Current live price: $${stock.price}.</p>
<p class="p1">Reddit Post Title: "${stock.postTitle}".</p>
<p class="p1">Reddit Post Content: "${truncatedBody}".</p>
<p class="p1">Provide the analysis in the specified JSON format, following all instructions.`;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const payload = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>contents: [{ parts: [{ text: userQuery }] }],</p>
<p class="p1"><span class="Apple-converted-space">                </span>systemInstruction: { parts: [{ text: systemPrompt }] },</p>
<p class="p1"><span class="Apple-converted-space">                </span>generationConfig: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>responseMimeType: "application/json",</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const response = await fetchWithBackoff(GEMINI_API_URL, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>method: 'POST',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>headers: { 'Content-Type': 'application/json' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>body: JSON.stringify(payload)</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>const result = await response.json();</p>
<p class="p1"><span class="Apple-converted-space">                </span>const jsonText = result.candidates?.[0]?.content?.parts?.[0]?.text;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!jsonText) throw new Error("Invalid AI response structure.");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return JSON.parse(jsonText);</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Gemini API call failed:", error);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return { error: "AI analysis failed. Please try again." };</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Main function to update the dashboard</p>
<p class="p1"><span class="Apple-converted-space">        </span>async function updateDashboard() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>trendsContainer.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>summaryTableBody.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>refreshBtn.disabled = true;</p>
<p class="p1"><span class="Apple-converted-space">            </span>refreshIcon.classList.add('spinner');</p>
<p class="p1"><span class="Apple-converted-space">            </span>refreshText.textContent = 'Fetching Top Posts...';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; 5; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>trendsContainer.innerHTML += createPlaceholderCard();</p>
<p class="p1"><span class="Apple-converted-space">                </span>summaryTableBody.innerHTML += createSummaryPlaceholderRow();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>let topPosts = await fetchAndParsePosts(REDDIT_TOP_URL);</p>
<p class="p1"><span class="Apple-converted-space">                </span>let trendsWithPrices = await getValidTrends(topPosts);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (trendsWithPrices.length &lt; 5) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>refreshText.textContent = 'Fetching Hot Posts...';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const hotPosts = await fetchAndParsePosts(REDDIT_HOT_URL);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const combinedPosts = [...topPosts];</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const topPostUrls = new Set(topPosts.map(p =&gt; p.postUrl));</p>
<p class="p1"><span class="Apple-converted-space">                    </span>hotPosts.forEach(post =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (!topPostUrls.has(post.postUrl)) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>combinedPosts.push(post);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>trendsWithPrices = await getValidTrends(combinedPosts);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (trendsWithPrices.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                     </span>trendsContainer.innerHTML = `&lt;p class="text-yellow-400 text-center col-span-full"&gt;Could not find any posts with valid, price-checkable tickers on r/pennystocks right now. The market might be closed. Please try again later.&lt;/p&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>summaryTableBody.innerHTML = `&lt;tr&gt;&lt;td colspan="6" class="text-center p-4 text-yellow-400"&gt;No valid tickers found.&lt;/td&gt;&lt;/tr&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>return;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const finalTrends = trendsWithPrices.slice(0, 5);</p>
<p class="p1"><span class="Apple-converted-space">                </span>populateSummaryTable(finalTrends);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>trendsContainer.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>refreshText.textContent = 'Analyzing with AI...';</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>let cardPromises = finalTrends.map(async (stock, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const card = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>card.innerHTML = createStockCardHTML(stock);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>card.classList.add('card-enter');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>trendsContainer.appendChild(card);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>setTimeout(() =&gt; card.classList.add('card-enter-active'), 100 * index);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>const analysis = await getRealAiAnalysis(stock);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>const companyEl = card.querySelector('.company-name');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const analysisEl = card.querySelector('.analysis-content');</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (analysis.error) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (companyEl) companyEl.textContent = 'Error';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (analysisEl) analysisEl.innerHTML = `&lt;p class="text-red-400"&gt;${analysis.error}&lt;/p&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (companyEl) companyEl.textContent = analysis.companyName || 'N/A';</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if(analysisEl) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>analysisEl.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="mb-3"&gt;&lt;strong class="font-semibold text-gray-300"&gt;Intrinsic Value Analysis:&lt;/strong&gt; ${analysis.intrinsicValue}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="mb-4"&gt;&lt;strong class="font-semibold text-gray-300"&gt;Short-Term Profit Outlook:&lt;/strong&gt; ${analysis.profitPossibility}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex flex-col sm:flex-row justify-around text-center gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="bg-green-900/50 p-3 rounded-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;p class="text-sm text-green-300 font-semibold"&gt;Suggested Selling Point&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;p class="text-xl md:text-2xl font-bold text-white"&gt;$${analysis.sellingPoint.toFixed(2)}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="bg-red-900/50 p-3 rounded-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;p class="text-sm text-red-300 font-semibold"&gt;Suggested Stop Loss&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;p class="text-xl md:text-2xl font-bold text-white"&gt;$${analysis.stopLoss.toFixed(2)}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>await Promise.all(cardPromises);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Failed to update dashboard:", error);</p>
<p class="p1"><span class="Apple-converted-space">                </span>trendsContainer.innerHTML = `&lt;p class="text-red-400 text-center col-span-full"&gt;${error.message}&lt;/p&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>summaryTableBody.innerHTML = `&lt;tr&gt;&lt;td colspan="6" class="text-center p-4 text-red-400"&gt;Failed to load data.&lt;/td&gt;&lt;/tr&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>} finally {</p>
<p class="p1"><span class="Apple-converted-space">                </span>refreshBtn.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                </span>refreshIcon.classList.remove('spinner');</p>
<p class="p1"><span class="Apple-converted-space">                </span>refreshText.textContent = 'Refresh Live Trends';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>async function getValidTrends(posts) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>refreshText.textContent = 'Validating Tickers &amp; Prices...';</p>
<p class="p1"><span class="Apple-converted-space">            </span>const trends = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const post of posts) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>for (const ticker of post.allTickers) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const stockData = await getStockData(ticker);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (stockData !== null) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>trends.push({ ...post, ticker, ...stockData });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>break;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>return trends;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function populateSummaryTable(stocks) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>summaryTableBody.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (stocks.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                 </span>summaryTableBody.innerHTML = `&lt;tr&gt;&lt;td colspan="6" class="text-center p-4 text-yellow-400"&gt;No valid tickers found.&lt;/td&gt;&lt;/tr&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const formatCell = (value) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (value === 'N/A' || isNaN(value)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return `&lt;td class="px-6 py-4 text-right text-gray-500"&gt;N/A&lt;/td&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>const numValue = parseFloat(value);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const color = numValue &gt;= 0 ? 'text-green-400' : 'text-red-400';</p>
<p class="p1"><span class="Apple-converted-space">                </span>return `&lt;td class="px-6 py-4 text-right ${color}"&gt;${numValue &gt;= 0 ? '+' : ''}${numValue}%&lt;/td&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>stocks.forEach(stock =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const row = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;tr class="bg-gray-800/50 border-b border-gray-700 hover:bg-gray-700/50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;th scope="row" class="px-6 py-4 font-medium text-white whitespace-nowrap"&gt;${stock.ticker}&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="px-6 py-4"&gt;$${stock.price}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${formatCell(stock.change1d)}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${formatCell(stock.change5d)}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${formatCell(stock.change1mo)}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${formatCell(stock.change1y)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>summaryTableBody.innerHTML += row;</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>function createSummaryPlaceholderRow() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>return `</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;tr class="bg-gray-800/50 border-b border-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="px-6 py-4"&gt;&lt;div class="h-4 bg-gray-700 rounded w-12 shimmer"&gt;&lt;/div&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="px-6 py-4"&gt;&lt;div class="h-4 bg-gray-700 rounded w-16 shimmer"&gt;&lt;/div&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="px-6 py-4 text-right"&gt;&lt;div class="h-4 bg-gray-700 rounded w-10 shimmer ml-auto"&gt;&lt;/div&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="px-6 py-4 text-right"&gt;&lt;div class="h-4 bg-gray-700 rounded w-10 shimmer ml-auto"&gt;&lt;/div&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="px-6 py-4 text-right"&gt;&lt;div class="h-4 bg-gray-700 rounded w-10 shimmer ml-auto"&gt;&lt;/div&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="px-6 py-4 text-right"&gt;&lt;div class="h-4 bg-gray-700 rounded w-10 shimmer ml-auto"&gt;&lt;/div&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function createPlaceholderCard() {</p>
<p class="p1"><span class="Apple-converted-space">             </span>return `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-gray-800 rounded-lg shadow-2xl p-6 border border-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-between items-start mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="w-1/2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex items-baseline gap-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="w-1/3 h-8 bg-gray-700 rounded shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="w-1/3 h-8 bg-gray-700 rounded shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="w-2/3 h-4 bg-gray-700 rounded mt-2 shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="w-1/4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="w-full h-6 bg-gray-700 rounded shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="w-full h-4 bg-gray-700 rounded mt-2 shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="w-full h-6 bg-gray-700 rounded mb-4 shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="border-t border-gray-700 my-4"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="w-1/3 h-6 bg-gray-700 rounded mb-3 shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="space-y-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="w-full h-4 bg-gray-700 rounded shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="w-5/6 h-4 bg-gray-700 rounded shimmer"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>function createStockCardHTML(stock) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const priceColor = stock.isUp ? 'text-green-400' : 'text-red-400';</p>
<p class="p1"><span class="Apple-converted-space">            </span>return `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-gray-800 rounded-lg shadow-2xl p-6 border border-gray-700 transform transition-transform duration-300 hover:-translate-y-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-col sm:flex-row justify-between sm:items-start mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex items-baseline gap-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;a href="https://finance.yahoo.com/quote/${stock.ticker}" target="_blank" rel="noopener noreferrer" class="group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;h2 class="text-2xl font-bold text-white group-hover:text-indigo-400 group-hover:underline flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>${stock.ticker}</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;svg class="w-4 h-4 ml-1.5 opacity-50 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"&gt;&lt;/path&gt;&lt;/svg&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p class="text-2xl font-semibold ${priceColor}"&gt;$${stock.price} &lt;span class="text-xs text-gray-500"&gt;(Live)&lt;/span&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="text-sm text-gray-400 company-name"&gt;Fetching company name...&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="text-left sm:text-right mt-2 sm:mt-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                             </span>&lt;p class="text-lg font-semibold text-indigo-400"&gt;${stock.upvotes.toLocaleString()} Upvotes&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                             </span>&lt;p class="text-sm text-gray-500"&gt;Trending Post&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="mb-4 p-3 bg-gray-900/50 rounded-lg border border-gray-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="text-sm text-gray-400"&gt;Top Mention Post:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;a href="${stock.postUrl}" target="_blank" rel="noopener noreferrer" class="text-gray-200 hover:text-indigo-400 hover:underline inline-flex items-center group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;span class="truncate" style="max-width: 90%;"&gt;${stock.postTitle}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;svg class="w-4 h-4 ml-1.5 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"&gt;&lt;/path&gt;&lt;/svg&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;div class="mt-4 flex justify-end"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button class="add-to-sandbox-btn bg-indigo-500/80 hover:bg-indigo-500 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors" data-ticker="${stock.ticker}" data-price="${stock.price}"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>Add to Sandbox</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="border-t border-gray-700 my-4"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-lg font-semibold text-white mb-3 flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;svg class="w-5 h-5 mr-2 text-indigo-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path d="M10 3.5a1.5 1.5 0 013 0V4a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-.5a1.5 1.5 0 000 3h.5a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-.5a1.5 1.5 0 00-3 0v.5a1 1 0 01-1 1H6a1 1 0 01-1-1v-3a1 1 0 011-1h.5a1.5 1.5 0 000-3H6a1 1 0 01-1-1V6a1 1 0 011-1h3a1 1 0 001-1v-.5z"&gt;&lt;/path&gt;&lt;/svg&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>Gemini AI Analysis</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="analysis-content text-gray-300 text-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center justify-center py-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                             </span>&lt;svg class="spinner w-8 h-8 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"&gt;&lt;/path&gt;&lt;/svg&gt;</p>
<p class="p1"><span class="Apple-converted-space">                             </span>&lt;p class="ml-3"&gt;Processing...&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- INITIALIZATION ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateDashboard();</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Set default date for sandbox form</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('purchaseDate').valueAsDate = new Date();</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>refreshBtn.addEventListener('click', updateDashboard);</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
<p class="p2"><br></p>
</body>
</html>